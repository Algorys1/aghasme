<div class="combat-container">

  <div class="hud player">
    <div class="portrait">
      <img [src]="player?.icon" alt="{{ player?.name }}" />
    </div>
    <div class="stats">
      <div class="line">
        <img src="assets/ui/hp.png" alt="HP" class="icon" />
        <div class="bar">
          <div class="fill" [style.width.%]="(player?.hp ?? 0) / (player?.maxHp ?? 1) * 100"></div>
        </div>
        <span class="value">{{ player?.hp }}/{{ player?.maxHp }}</span>
      </div>

      <div class="line">
        <img src="assets/ui/mana.png" alt="MP" class="icon" />
        <div class="bar mana">
          <div class="fill" [style.width.%]="(player?.mp ?? 0) / (player?.maxMp ?? 1) * 100"></div>
        </div>
        <span class="value">{{ player?.mp }}/{{ player?.maxMp }}</span>
      </div>

      <div class="name">{{ player?.name }} â€¢ Lv {{ player?.level }}</div>
    </div>
  </div>
  <div class="player-actions">
    <button>Inventory</button>
    <button>Skills</button>
  </div>
  <div class="status-effects">
    ðŸ”¥3 âš¡1, ðŸªž2
  </div>

  <app-combat-board></app-combat-board>

  <div class="hud enemy">
    <div class="portrait">
      <img [src]="enemy?.icon" alt="{{ enemy?.name }}" />
    </div>
    <div class="stats">
      <div class="line">
        <img src="assets/ui/hp.png" alt="HP" class="icon" />
        <div class="bar">
          <div class="fill" [style.width.%]="(enemy?.hp ?? 0) / (enemy?.maxHp ?? 1) * 100"></div>
        </div>
        <span class="value">{{ enemy?.hp }}/{{ enemy?.maxHp }}</span>
      </div>

      <div class="line">
        <img src="assets/ui/mana.png" alt="MP" class="icon" />
        <div class="bar mana">
          <div class="fill" [style.width.%]="(enemy?.mp ?? 0) / (enemy?.maxMp ?? 1) * 100"></div>
        </div>
        <span class="value">{{ enemy?.mp }}/{{ enemy?.maxMp }}</span>
      </div>

      <div class="name">{{ enemy?.name }} â€¢ Lv {{ enemy?.level }}</div>
    </div>
  </div>

  @if(isPlayerTurn) {
    <div class="actions">
      <button (click)="onEndTurn()">End Turn</button>
      <button (click)="onQuit()">Quit</button>
    </div>
  }

  @if(result) {
    <div class="result">
      @if(result.winner === 'player') {
        <h2>Victory!</h2>
        <p>XP: +{{ result.xpGained }} | Gold: +{{ result.goldGained }}</p>
      }
      @if(result.winner === 'enemy') {
        <h2>Defeat...</h2>
      }
    </div>
  }

</div>
