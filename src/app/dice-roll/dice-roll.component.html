<div class="dice-roll-overlay" [hidden]="!visible">
  <div class="dice-roll-window">
    <h2 class="title">Roll the {{ orb | titlecase }} Die</h2>

    <div class="roll-infos">
      <p>Difficulty: <strong>{{ difficulty }}</strong></p>
      <p>Your {{ orb }} score: <strong>{{ orbPower }}</strong></p>
      <p>Modifier: <strong>{{ modifier >= 0 ? '+' + modifier : modifier }}</strong></p>
    </div>

    <canvas #diceCanvas></canvas>

    <div class="controls">
      @if(!rolled && !rolling) {
        <button (click)="roll()">
          <img class="icon" src="assets/ui/hud-dice.png"/>
        </button>
      }

      @if(rolling) {
        <div class="rolling-text">Rolling...</div>
      }

      @if(rolled) {
        <div class="result-block">
          <p class="total">Total: <strong>{{ total }}</strong></p>

          <div class="result-verdict" [ngClass]="verdict">
            @switch (verdict) {
              @case ('criticalFail') { ‚ùå Critical Fail! }
              @case ('fail') { Fail }
              @case ('success') { ‚úÖ Success }
              @case ('criticalSuccess') { üåü Critical Success! }
            }
          </div>

          <button class="close-btn" (click)="emitResult()">
            <img class="icon" src="assets/ui/btn-ok.png"/>
          </button>
        </div>
      }
    </div>
  </div>
</div>
