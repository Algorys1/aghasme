<div class="equipment-panel">
  @if(character) {
    <div class="primary-stats">
      <div><strong>Attack:</strong> {{ getStat('attack') }}</div>
      <div><strong>Defense:</strong> {{ getStat('defense') }}</div>
    </div>
  }

  <section class="equip-grid">
    @for (slot of equipSlots; track $index) {
      <div class="equip-slot" (click)="compare(slot)">
        @if (equipped[slot]) {
          <img
            [src]="equipped[slot]!.icon"
            [alt]="equipped[slot]!.name"
          />
        } @else {
          <div class="slot-name">{{ slot }}</div>
        }
      </div>
    }
  </section>

  @if (showComparison && comparisonTarget) {
    <section class="item-description">
      <div class="item-header">
        <h3 [ngClass]="comparisonTarget.rarity.toLowerCase()">
          {{ comparisonTarget.name }}
        </h3>
        <span class="rarity-label">{{ comparisonTarget.rarity }}</span>
      </div>

      <p class="item-text">{{ comparisonTarget.description }}</p>

      @if (comparisonTarget.effects.length) {
        <ul class="item-effects">
          @for (eff of comparisonTarget.effects; track eff.stat + '-' + eff.value) {
            <li>
              <span class="effect-stat">{{ eff.stat | uppercase }}</span>
              <span class="effect-value">
                {{ eff.value > 0 ? '+' : '' }}{{ eff.value
                }}{{ eff.type === 'percent' ? '%' : '' }}
              </span>
            </li>
          }
        </ul>
      }

      <div class="item-value">
        <img src="assets/ui/gold.png" alt="Gold" />
        <span>{{ comparisonTarget.computedValue ?? comparisonTarget.baseValue }}</span>
      </div>
    </section>

    <section class="item-actions">
      <button class="action-btn" title="Unequip" (click)="unequip(comparisonTarget.equipSlot![0])">
        <img src="assets/ui/action-unequip.png" alt="Unequip" />
      </button>
    </section>
  }
</div>
